# Модель прецедентів

## Загальна схема

@startuml

actor "Відвідувач" as Visitor
actor "Авторизований користувач" as User
actor "Адміністратор" as Admin

usecase "<b>Visitor.SingUp</b>\nРеєстрація" as Visitor.SingUp

usecase "<b>SupportManage</b>" as SupportManage
usecase "<b>ProfileManage</b>" as ProfileManage
usecase "<b>SearchManage</b>" as SearchManage
usecase "<b>DataManage</b>" as DataManage

usecase "<b>AccountManage</b>\nКерування обліковими\n записами користувачів" as ManageAccount
usecase "<b>SourceManage</b>\nКерування джерелами інформації" as ManageSource

Visitor -d-> Visitor.SingUp
Visitor.SingUp -d-> User
Admin -u-|> User

User -u-> SupportManage
User -u-> ProfileManage
User -l-> SearchManage
User -r-> DataManage

Admin -l-> ManageAccount
Admin -r-> ManageSource

@enduml

## Схема використання

### Відвідувач

@startuml
actor Guest
actor User

usecase "<b>Visitor.Registration\nРеєстрація" as Registration

Guest -> Registration
Registration -> User

@enduml

### Користувач

@startuml

actor "Користувач" as User

usecase "<b>SupportManage</b>" as SupportManage
usecase "<b>ProfileManage</b>" as ProfileManage
usecase "<b>SearchManage</b>" as SearchManage
usecase "<b>DataManage</b>" as DataManage

usecase "<b>User.Help</b>\nЗвернення до\nпідтримки" as User.Help
usecase "<b>User.Login</b>\nАвторизація" as User.Login
usecase "<b>User.PasswordRecovery</b>\nВідновлення паролю\nкористувачем" as User.PasswordRecovery
usecase "<b>User.DeleteRequest</b>\nЗапит на видалення\nоблікового запису" as User.DeleteRequest

usecase "<b>User.SearchRequest</b>\nЗапит на пошук" as User.SearchRequest
usecase "<b>User.DataFilter</b>\nФільтрація даних" as User.DataFilter
usecase "<b>User.Import</b>\nЗавантаження даних у систему" as User.Import
usecase "<b>User.Export</b>\nЗавантаження даних з системи" as User.Export


User --> SupportManage
User --> ProfileManage
User --> SearchManage
User --> DataManage

SupportManage <-[dashed]- User.Help : <<extend>>
ProfileManage <-[dashed]- User.Login : <<extend>>

User.Login <-[dashed]- User.PasswordRecovery : <<extend>>
ProfileManage <-[dashed]- User.DeleteRequest : <<extend>>
SearchManage <-[dashed]- User.SearchRequest : <<extend>>
User.SearchRequest <-[dashed]- User.DataFilter : <<extend>>
DataManage <-[dashed]- User.Import : <<extend>>
DataManage <-[dashed]- User.Export : <<extend>>

@enduml

### Адміністратор

@startuml

actor "Адміністратор" as Admin

usecase "<b>AccountManage</b>\nКерування обліковими\n записами користувачів" as ManageAccount
usecase "<b>SourceManage</b>\nКерування джерелами інформації" as ManageSource

usecase "<b>Administrator.AddSource</b>\nДодавання нового джерела" as Administrator.AddSource
usecase "<b>Administrator.DeleteSource</b>\nВидалення джерела" as Administrator.DeleteSource
usecase "<b>Administrator.RequestHistory</b>\nІсторія запитів користувачів" as Administrator.RequestHistory
usecase "<b>Admin.ProfileEdit</b>\nРедагування\nоблікового запису" as Admin.ProfileEdit
usecase "<b>Admin.ProfileDelete</b>\nВидалення\nоблікового запису" as Admin.ProfileDelete

Admin --> ManageAccount
Administrator.RequestHistory .u.> ManageAccount: <<extends>>
Admin.ProfileEdit .u.> ManageAccount: <<extends>>
Admin.ProfileDelete .u.> ManageAccount: <<extends>>

Admin --> ManageSource
Administrator.AddSource .u.> ManageSource: <<extends>>
Administrator.DeleteSource .u.> ManageSource: <<extends>>

@enduml

## Сценарії використання

### Відвідувач

#### Реєстрація

| ***ID***:         | Visitor.SingUp                                  |
|-------------------|-------------------------------------------------|
| ***НАЗВА***:      | Реєстрація                                      |
| ***УЧАСНИКИ***:   | Відвідувач, Система                             |
| ***ПЕРЕДУМОВИ***: | В користувача немає облікового запису у системі |
| ***РЕЗУЛЬТАТ***:  | Обліковий запис нового користувача              |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | BusyLogin Зайнятий логін <br /> SingUp.WrongEmail Невірна електронна пошта <br /> SingUp.SimplePass Пароль малої складності <br />SingUp.NotConfirm Користувач не підтвердив реєстрацію |

@startuml
|Відвідувач|
    start
    :Натискає кнопку реєстрації нового облікового запису;
|Система|
    :Надає форму для заповнення;
|Відвідувач|
    :Заповнює форму для реєстрації;
    :Заповнює поля: логін, адреса електронної пошти, пароль;
    :Натискає кнопку підтвердження реєстрації;
        note left #FF736E
            SingUp.NotConfirm
        end note

|Система|
    :Перевіряє дані з форми;
        note right #FF736E
            SingUp.BusyLogin
            SingUp.WrongEmail
            SingUp.SimplePass
        end note

    :Створює новий обліковий запис;

|Відвідувач|
    stop;
@enduml

### Користувач

#### Авторизація

| ***ID***:         | User.Login                                                                        |
|-------------------|-----------------------------------------------------------------------------------|
| ***НАЗВА***:      | Авторизація                                                                       |
| ***УЧАСНИКИ***:   | Користувач, Система                                                               |
| ***ПЕРЕДУМОВИ***: | Користувач має обліковий запис у системі                                          |
| ***РЕЗУЛЬТАТ***:  | Успішна авторизація дозволяє користувачеві отримати доступ до функціоналу системи |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Невірний логін Login.WrongLogin<br /> Невірний пароль Login.WrongPass<br /> Блокування облікового запису Login.AccBlocked<br />Обліковий запис не існує Login.AccDoesntExist<br /> Невірна електронна пошта Login.WrongEmail |

@startuml
|Користувач|
    start
    :Натискає кнопку входу до облікового запису;
|Система|
    :Надає форму для заповнення;
|Користувач|
    :Отримує форму для авторизації;
    :Заповнює поля:\nлогін або адреса електронної пошти, пароль;
    :Натискає кнопку підтвердження авторизації;
|Система|
    :Перевіряє дані з форми;
        note right #FF736E
            Login.WrongLogin
            Login.WrongEmail
            Login.WrongPass
            Login.AccBlocked
            Login.AccDoesntExist
        end note
    :Підтверджує виконання;
|Користувач|
    stop;
@enduml

#### Звернення до підтримки

| ***ID***:         | User.Help                                           |
|-------------------|-----------------------------------------------------|
| ***НАЗВА***:      | Звернення користувача до підтримки                  |
| ***УЧАСНИКИ***:   | Користувач, система                                 |
| ***ПЕРЕДУМОВИ***: | Користувач потребує допомоги                        |
| ***РЕЗУЛЬТАТ***:  | Користувач отримує інформацію про роботу з системою |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Система не змогла ідентифікувати запит - problem_not_defined; <br />Система не знає вирішення цієї проблеми користувача - problem_no_solution. |

@startuml
|Користувач|
    start
    :Натискає на кнопку звернення до системи;
|Система|
    :Надає користувачу форму для заповнення;
|Користувач|
    :Отримує доступ для заповнення форми;
    :Вписує текст свого питання;
    :Надсилає заповнену форму системі;
|Система|
    :Аналізує проблему користувача за ключовими словами;
        note right #FF736E
            problem_not_defined
            problem_no_solution
        end note

    :Надсилає користувачу необхідну довідку;
|Користувач|
    :Отримує довідку;
    stop;
@enduml

#### Відновлення паролю

| ***ID***:         | User.PasswordRecovery                          |
|-------------------|------------------------------------------------|
| ***НАЗВА***:      | Відновлення паролю користувачем                |
| ***УЧАСНИКИ***:   | Користувач, система                            |
| ***ПЕРЕДУМОВИ***: | Користувач має обліковий запис у системі       |
| ***РЕЗУЛЬТАТ***:  | Оновлений пароль облікового запису користувача |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Облікового запису не існує PasswordRecovery.WrongEmail <br /> Помилка переходу на сторінку відновлення InvalidRecoveryLink <br /> Некоректний пароль InvalidPassForRecovery |

@startuml
|Користувач|
    start
    :Переходить на сторінку відновлення паролю;
|Система|
    :Надає форму запиту для відновлення паролю;
|Користувач|
    :Вводить електронну пошту в поле;
|Система|
    :Надсилає на вказану електронну пошту\nлист зі згенерованим посиланням;
        note right #FF736E
            PasswordRecovery.WrongEmail
        end note
|Користувач|
    :Переходить за посиланням,\nнаданою системою у листі;
        note left #FF736E
            InvalidRecoveryLink
        end note
|Система|
    :Надає форму для відновлення паролю;
|Користувач|
    :Вводить новий пароль та надсилає;
|Система|
    :Оновлює пароль;
        note right #FF736E
            InvalidPassForRecovery
        end note
|Користувач|
    stop
@enduml

#### Запит на видалення облікового запису

| ***ID***:                | User.DeleteRequest                                                           |
|--------------------------|------------------------------------------------------------------------------|
| ***НАЗВА***:             | Запит на видалення облікового запису                                         |
| ***УЧАСНИКИ***:          | Користувач, Система                                                          |
| ***ПЕРЕДУМОВИ***:        | Користувач увійшов в обліковий запис                                         |
| ***РЕЗУЛЬТАТ***:         | Успішне видалення облікового запису користувача                              |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Видалення не підтверджене користувачем DeleteRequest.NotConfirm <br /> Введений пароль є неправильним DeleteRequest.WrongPass |

@startuml
|Користувач|
    start
    :Натискає кнопку видалення\nоблікового запису;
|Система|
    :Надає форму для заповнення;
|Користувач|
    :Отримує форму для видалення;
    :Заповнює поле: пароль;
    :Натискає кнопку підтвердження;
        note left #FF736E
            DeleteRequest.NotConfirm
        end note
|Система|
    :Перевіряє дані з форми;
        note right #FF736E
            DeleteRequest.WrongPass
        end note

    :Видаляє обліковий запис;

|Користувач|
    stop;
@enduml

#### Пошук

| ***ID***:         | User.SearchRequest                                                                                            |
|-------------------|---------------------------------------------------------------------------------------------------------------|
| ***НАЗВА***:      | Запит на пошук                                                                                                |
| ***УЧАСНИКИ***:   | Користувач, система.                                                                                          |
| ***ПЕРЕДУМОВИ***: | Користувач авторизований. <br /> Користувач вже знаходиться на домашній сторінці або сторінці пошуку системи. |
| ***РЕЗУЛЬТАТ***:  | Відображення результатів пошуку користувачеві.                                                                |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Невдала спроба пошуку через помилково введені дані - SearchRequest.InvalidInput. <br /> Користувач не був авторизований - SingUp.False.                   |

@startuml
|Користувач|
    start
    :Вводить ключові слова\nабо параметри пошуку;
    :Натискає на кнопку "Пошук";
|Система|
    :Обробляє запит користувача;
    :Відображає результати пошуку;
    :Вносить результати\nв історію пошуку;
        note right #FF736E
            SearchRequest.InvalidInput
        end note
|Користувач|
    :Переглядає результати пошуку;
    :Взаємодіє з результатами;
    stop;
@enduml

#### Фільтрація

| ***ID***:                | User.DataFilter                                                                      |
|--------------------------|--------------------------------------------------------------------------------------|
| ***НАЗВА***:             | Фільтрація даних                                                                     |
| ***УЧАСНИКИ***:          | Користувач, система.                                                                 |
| ***ПЕРЕДУМОВИ***:        | Користувач вже виконав пошук та отримав результати. <br /> Користувач авторизований. |
| ***РЕЗУЛЬТАТ***:         | Відображення оновлених результатів пошуку з урахуванням обраних фільтрів.            |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Користувач не обрав жодного фільтру - DataFilter.NoFilters.                          |

@startuml
|Користувач|
    start
    :Переглядає результати пошуку;
    :Активує функцію фільтрації;
|Система|
    :Відображає доступні параметри\nдля фільтрації;
|Користувач|
    :Обирає бажані критерії фільтрації;
|Система|
    :Відображає оновлені результати з\nврахуванням застосованих фільтрів;
        note right #FF736E
            DataFilter.NoFilters
        end note
    
|Користувач|
    :Переглядає оновлені результати з\nврахуванням застосованих фільтрів;
    stop;
@enduml

#### Імпорт даних

| ***ID***:         | User.Import                                               |
|-------------------|-----------------------------------------------------------|
| ***НАЗВА***:      | Завантаження даних у систему                              |
| ***УЧАСНИКИ***:   | Користувач, система                                       |
| ***ПЕРЕДУМОВИ***: | Авторизація користувача, наявність даних для завантаження |
| ***РЕЗУЛЬТАТ***:  | Дані успішно завантажені у систему                        |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Помилки під час завантаження - wrong_data_format <br /> Втрата з'єднання - wrong_connection <br /> Обмеження прав доступу - Import.AccessDenied |

@startuml
|Користувач|
    start
    :Переходить до розділу\n"Завантаження даних";
    :Натискає кнопку\n"Завантажити дані в систему";
        note left #FF736E
            Import.AccessDenied
        end note
|Система|
    :Отримує запит на завантаження даних;
    :Відображає форму параметрів\nдля завантаження;
|Користувач|
    :Вибирає параметри та\nнатискає кнопку "Завантажити";
|Система|
    :Завантажує дані\nвідповідно до\nвказаних параметрів;
        note right #FF736E
            wrong_data_format
            wrong_connection
        end note
    :Генерує підтвердження про\nуспішне завантаження\nта відображає його користувачеві;
|Користувач|
    :Отримує сповіщення про успішне\nзавантаження даних в систему;
    stop
@enduml

#### Експорт даних

| ***ID***:                | User.Export                                                            |
|--------------------------|------------------------------------------------------------------------------------------|
| ***НАЗВА***:             | Завантаження даних з системи                                                             |
| ***УЧАСНИКИ***:          | Користувач, система                                                                      |
| ***ПЕРЕДУМОВИ***:        | Авторизація користувача, доступність даних у системі                                     |
| ***РЕЗУЛЬТАТ***:         | Успішне завантаження даних                                                               |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Відсутність даних у системі - no_data <br /> Помилки під час завантаження - wrong_connection; <br /> Відсутність електронної пошти - no_email <br /> Неправильно введено електронну пошту - User.Export.WrongEmail <br /> Обмеження прав доступу - Export.AccessDenied |

@startuml
|Користувач|
    start
    :Переходить до розділу\n"Завантаження даних";
    :Натискає кнопку\n"Завантажити дані з системи";
        note left #FF736E
            Export.AccessDenied
        end note
|Система|
    :Отримує запит на завантаження даних;
    :Відображає форму параметрів для завантаження;
|Користувач|
    :Вибирає параметри та\nнатискає кнопку "Завантажити";
|Система|
    :Виконує пошук даних в базі даних\nзгідно з вказаними параметрами.;
        note right #FF736E
            no_data
        end note
    :Генерує підтвердження, про успішно знайдені дані;
    :Перевіряє наявність електронної адреси користувача;
        note right #FF736E
            no_email
        end note
    :Виконує підготовку до завантаження даних;
        note right #FF736E
            wrong_connection
        end note
    :Надсилає дані на пошту користувача;
        note right #FF736E
            User.Export.WrongEmail
        end note
|Користувач|
    :Отримує сповіщення про успішне\nнадсилання даних на пошту;
    :Завантажує отримані дані з пошти;
        note left #FF736E
            wrong_connection
        end note
    stop
@enduml

### Адміністратор

#### Історія запитів користувачів

| ***ID***:                | Administrator.RequestHistory                                                              |
|--------------------------|--------------------------------------------------------------------------------------------|
| ***НАЗВА***:             | Історія запитів користувачів                                                               |
| ***УЧАСНИКИ***:          | Адміністратор, користувачі, система                                                        |
| ***ПЕРЕДУМОВИ***:        | Авторизація адміністратора, потреба зберігати та відстежувати історію запитів користувачів |
| ***РЕЗУЛЬТАТ***:         | Збереження та доступ до історії запитів для адміністратора                                 |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Втрата даних wrong_search <br /> Обмежений доступ до історії RequestHistory.AccessDenied  |

@startuml
|Адміністратор|
    start
    :Переходить до розділу "Історія запитів користувача";
    :Натискає кнопку "Обрати користувача";
    :Натискає кнопку "Переглянути історію запитів";
        note left #FF736E
            RequestHistory.AccessDenied
        end note
|Система|
    :Шукає та формує історію запитів;
        note right #FF736E
            wrong_search
        end note
    :Відображає її у вигляді списку або таблиці;
|Адміністратор|
    stop
@enduml

#### Додавання джерела

| ***ID***:                | Administrator.AddSource                               |
|--------------------------|------------------------------------------------------------|
| ***НАЗВА***:             | Додавання нового джерела                                   |
| ***УЧАСНИКИ***:          | Адміністратор, система                                     |
| ***ПЕРЕДУМОВИ***:        | Авторизація адміністратора <br />Потреба в  новому джерелі |
| ***РЕЗУЛЬТАТ***:         | Створення нового джерела                                   |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Помилка аналізу AnalyzeError<br />Брак пам'яті LimitStorage<br />Доступ заблокований AddSource.AccessDenied<br /> Відмова адміністратора від збереження AddSource.NotConfirm<br /> Джерело вже існує DuplicateSource |

@startuml
|Адміністратор|
    start
    :Вибирає опцію додавання\nнового джерела;
        note left #FF736E
            AddSource.AccessDenied
        end note
|Система|
    :Надає форму для введення\nінформації про джерело;
|Адміністратор|
    :Вводить інформацію про джерело;
    :Підтверджує додавання джерела;
        note left #FF736E
            AddSource.NotConfirm
        end note
|Система|
    :Додає нове джерело\nдо системи;
        note right #FF736E
            DuplicateSource
            LimitStorage
            AnalyzeError
        end note
|Адміністратор|
    stop;
@enduml

#### Видалення джерела

| ***ID***:                | Administrator.DeleteSource                                                                          |
|--------------------------|------------------------------------------------------------------------------------------------------|
| ***НАЗВА***:             | Видалення джерела                                                                                    |
| ***УЧАСНИКИ***:          | Адміністратор, система                                                                               |
| ***ПЕРЕДУМОВИ***:        | Авторизація адміністратора, потреба видалити джерело                                                 |
| ***РЕЗУЛЬТАТ***:         | Джерело видалене                                                                                     |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Обмежена кількість прав доступу Delete_Source.AccessDenied<br />Відсутність джерела NonexistentSource<br /> Відмова адміністратора від видалення Delete_Source.NotConfirm |

@startuml
|Адміністратор|
    start
    :Обирає опцію "Видалити джерело";
        note left #FF736E
            DeleteSource.AccessDenied
        end note
|Система|
    :Надає список джерел;
|Адміністратор|
    :Вибирає джерело для видалення;
    :Підтверджує видалення джерела;
        note left #FF736E
            DeleteSource.NotConfirm
        end note
|Система|
    :Видаляє джерело з системи;
        note right #FF736E
            NonexistentSource
        end note
|Адміністратор|
    stop;
@enduml

#### Редагування облікового запису

| ***ID***:         | Admin.ProfileEdit                                                                          |
|-------------------|--------------------------------------------------------------------------------------------|
| ***НАЗВА***:      | Редагування облікового запису                                                              |
| ***УЧАСНИКИ***:   | Адміністратор, система                                                                     |
| ***ПЕРЕДУМОВИ***: | Адміністратор виконав авторизацію, адміністратор має права доступу до редагування профілю. |
| ***РЕЗУЛЬТАТ***:  | Змінені дані облікового запису користувача                                                 |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Адміністратор не має доступу до редагування облікового запису ProfileEdit.AccessDenied<br />Обраного користувача не існує ProfileEdit.WrongLogin<br />Адміністратор не підтверджує редагування облікового запису Admin.ProfileEdit.NotConfirm |

@startuml
|Адміністратор|
    start
    :Вибирає обліковий запис\nдля редагування;
        note left #FF736E
            ProfileDelete.AccessDenied
            ProfileDelete.WrongLogin
        end note

|Система|
    :Надає форму для\nредагування запису;
|Адміністратор|
    :Змінює інформацію в\nобліковому записі;
    :Натискає кнопку\nпідтвердження редагування;
        note left #FF736E
            Admin.ProfileDelete.NotConfirm
        end note

|Система|
    :Перевіряє дані з форми;
        note right #FF736E
            ProfileEdit.WrongLogin
            ProfileEdit.WrongEmail
            ProfileEdit.WrongPass
        end note

    :Зберігає змінену інформацію;

|Адміністратор|
    stop;
@enduml

#### Видалення облікового запису

| ***ID***:         | Admin.ProfileDelete                                                               |
|-------------------|-----------------------------------------------------------------------------------|
| ***НАЗВА***:      | Видалення облікового запису                                                       |
| ***УЧАСНИКИ***:   | Адміністратор, система                                                            |
| ***ПЕРЕДУМОВИ***: | Адміністратор виконав авторизацію, адміністратор має права для видалення профілю. |
| ***РЕЗУЛЬТАТ***:  | Обліковий запис видалений адміністратором                                         |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Адміністратор не має доступу до видалення облікового запису ProfileDelete.AccessDenied<br />Обраного користувача не існує ProfileDelete.WrongLogin<br />Адміністратор не підтверджує видалення облікового запису Admin.ProfileDelete.NotConfirm |

@startuml
|Адміністратор|
    start
    :Вибирає обліковий запис\nдля видалення;
        note left #FF736E
            ProfileDelete.AccessDenied
            ProfileDelete.WrongLogin
        end note
|Система|
    :Надає форму для\nпідтвердження видалення;
|Адміністратор|
    :Підтверджує видалення\nоблікового запису;
        note left #FF736E
            Admin.ProfileDelete.NotConfirm
        end note

|Система|
    :Перевіряє дані з форми;
        note right #FF736E
            ProfileDelete.WrongLogin
        end note

    :Видаляє обліковий запис;

|Адміністратор|
    :Повідомляє адміністратору про\nуспішне видалення профілю;
    stop;
@enduml
